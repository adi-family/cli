# ADI Linux Build Workflow
# Cross-compile services for Linux deployment

[workflow]
name = "build-linux"
description = "Cross-compile services for Linux (Docker deployment)"

[[inputs]]
name = "services"
type = "multi-select"
prompt = "Select services to build (empty for all)"
# Dynamic options: discover services from release/ directory
options_source = { type = "release-services" }

[[steps]]
name = "Build Linux binaries"
run = """
# Prelude variables and functions are automatically available

SERVICES="{{ services | join(' ') }}"

if [ -z "$SERVICES" ]; then
    info "Building all services for $PLATFORM..."
    "$WORKFLOWS_DIR/build-linux.sh"
else
    info "Building: $SERVICES"
    "$WORKFLOWS_DIR/build-linux.sh" $SERVICES
fi

success "Linux build complete"
"""
